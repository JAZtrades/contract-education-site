<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Appointment Calendar</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- FullCalendar CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js" defer></script>
  <script defer>
    document.addEventListener('DOMContentLoaded', function() {
      const calendarEl = document.getElementById('calendar');
      // load appointments from localStorage
      const appointments = JSON.parse(localStorage.getItem('appointments') || '[]');
      const events = appointments.map((appt) => {
        // Determine event color based on payment status
        let color;
        if (appt.status === 'Paid in Full') {
          color = '#48bb78'; // green for fully paid
        } else if (appt.status === 'Deposit Paid') {
          color = '#ed8936'; // orange for deposit paid
        } else {
          color = '#a0aec0'; // grey for pending/other
        }
        return {
          title: `${appt.name} (${appt.status})`,
          start: appt.datetime,
          allDay: false,
          backgroundColor: color,
          borderColor: color
        };
      });
      const calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,timeGridWeek,timeGridDay'
        },
        events: events
      });
      calendar.render();
    });
  </script>
</head>
<body>
  <header>
    <div class="container">
      <h1>Appointments Calendar</h1>
      <nav>
        <a href="index.html" class="btn-secondary">Home</a>
        <a href="admin-payments.html" class="btn-secondary">Admin Dashboard</a>
      </nav>
    </div>
  </header>
  <main>
    <section class="calendar-section">
      <div class="container">
        <div id="calendar"></div>
      </div>
    </section>
  </main>
  <footer>
    <div class="container">
      <p>&copy; 2025 JAZtrades. All rights reserved.</p>
    </div>
  </footer>
</body>
</html>
